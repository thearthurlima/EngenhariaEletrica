#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX 100

int divideString(char* string, char matriz[MAX][MAX], int* numLinhas)
{
    int i, j;
    int tamanhoDaString = strlen(string);
    int linha = 0;
    int coluna = 0;

    for (i = 0; i < tamanhoDaString; i++) 
    {
        if (string[i] == ' ' || i == tamanhoDaString - 1) 
        {
            matriz[linha][coluna] = '\0';
            linha++;
            coluna = 0;
        }
        else if (linha < MAX && coluna < MAX - 1) 
        {
            matriz[linha][coluna] = string[i];
            coluna++;
        }
    }
    *numLinhas = linha;
    
    return 0;
}

int ehPalindromo(char *palavra) 
{
    int tamanhoDaPalavra = strlen(palavra);
    for (int i = 0; i < tamanhoDaPalavra / 2; i++) 
    {
        if (palavra[i] != palavra[tamanhoDaPalavra - i - 1]) 
        {
            return 0;  // Nao eh um palindromo
        }
    }
    return 1; //Eh palindromo
}

void juntaStringModificada(char *stringModificada, char matriz[MAX][MAX], int numLinhas)
{
    for (int i = 0; i < numLinhas; i++) 
    {
        if (ehPalindromo(matriz[i])) 
        {
            strcat(stringModificada, "*");
        } 
        else 
        {
            strcat(stringModificada, matriz[i]);
        }
        strcat(stringModificada, " ");
    }
}

int main() 
{
    char string[MAX];
    char matriz[MAX][MAX];
    char stringModificada[MAX];
    int numLinhas;

    printf("Digite uma string: ");
    fgets(string, MAX, stdin);

    divideString(string, matriz, &numLinhas);

    juntaStringModificada(stringModificada, matriz, numLinhas);

    printf("\nString modificada: %s\n", stringModificada);

    return 0;
}
