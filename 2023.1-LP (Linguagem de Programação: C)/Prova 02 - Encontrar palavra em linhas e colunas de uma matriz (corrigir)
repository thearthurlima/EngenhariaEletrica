#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX 100

int lerUmaMatriz (char matriz[MAX][MAX], int linhas, int colunas)
{
	for(int i = 0; i < linhas; i++)
	{
		for(int j = 0; j < colunas; j++)
		{
			scanf(" %c", &matriz[i][j]);
		}
	}
	
	return 0;
}

int imprimirUmaMatriz (char matriz[MAX][MAX], int linhas, int colunas)
{
	for(int i = 0; i < linhas; i++)
	{
		for(int j = 0; j < colunas; j++)
		{
			printf(" %c", matriz[i][j]);
		}
		printf("\n");
	}
	
	return 0;
}

int procurarPalavraNasLinhas (char matriz[MAX][MAX], char palavra[MAX], int linhas, int colunas)
{
	int contagem = 0, q;
	int numeroDeAparicoesLinhas = 0;
	int tamanhoDaPalavra;
	
	tamanhoDaPalavra = strlen(palavra);

	for(int i = 0; i < linhas; i++)
	{
		for(int j = 0, k = 0; j < colunas; j++)
		{
			if(matriz[i][j] == palavra[k])
			{
				contagem = 0;
				for(k = 0, q = j; k < colunas; k++, q++) 
				{
					if(matriz[i][q] == palavra[k])
					contagem++;
				}
				if (contagem == tamanhoDaPalavra-1)
				numeroDeAparicoesLinhas++;
			}
		}
	}
	
	return numeroDeAparicoesLinhas;
}

int procurarPalavraNasColunas (char matriz[MAX][MAX], char palavra[MAX], int linhas, int colunas)
{
	int contagem = 0, q;
	int numeroDeAparicoesColunas = 0;
	int tamanhoDaPalavra;
	
	tamanhoDaPalavra = strlen(palavra);

	for(int i = 0; i < linhas; i++)
	{
		for(int j = 0, k = 0; j < colunas; j++)
		{
			if(matriz[i][j] == palavra[k])
			{
				contagem = 0;
				for(k = 0, q = i; k < linhas; k++, q++)
				{
					if(matriz[q][j] == palavra[k])
					contagem++;
				}
				if (contagem == tamanhoDaPalavra-1)
				numeroDeAparicoesColunas++;
			}
		}
	}
	
	return numeroDeAparicoesColunas;
}

int main ()
{
	char matrizDoUsuario[MAX][MAX];
	char palavra[MAX];
	int linhas, colunas;
	int tamanhoDaPalavra, aparicoesLinhas, aparicoesColunas, aparicoesTotais = 0;
	char caractere;
	
	printf("Digite uma palavra: ");
	fgets(palavra, MAX, stdin);
	tamanhoDaPalavra = strlen(palavra);
	
	printf("Defina o numero de linhas da matriz: ");
	scanf("%d", &linhas);
	printf("Defina o numero de colunas da matriz: ");
	scanf("%d", &colunas);
	
	printf("Entre com os valores da matriz: ");

	lerUmaMatriz(matrizDoUsuario, linhas, colunas);
	imprimirUmaMatriz(matrizDoUsuario, linhas, colunas);
	
	 /*aparicoesLinhas = procurarPalavraNasLinhas(matrizDoUsuario, palavra, linhas, colunas);
	/*aparicoesColunas = procurarPalavraNasColunas(matrizDoUsuario, palavra, linhas, colunas);
	aparicoesTotais = aparicoesLinhas + aparicoesColunas;*/
	
	printf("\n Numero de aparicoes linhas: %d", procurarPalavraNasLinhas(matrizDoUsuario, palavra, linhas, colunas));
	printf("\n Numero de aparicoes colunas: %d", procurarPalavraNasColunas(matrizDoUsuario, palavra, linhas, colunas));
	
	/*printf("\n A PALAVRA APARECE %d VEZES", aparicoesTotais);*/
	
	return 0;
}
